import{r as t,b4 as E,b0 as D,j as a,S as I}from"./index-BlzzehOQ.js";import{O as M}from"./Card-9qyUmhqV.js";import{T as N}from"./index-DZddPdwL.js";import"./placeholder-product.jpg-DXgA_N8Y.js";import"./EyeOutlined-BH15Xhlo.js";import"./index-Bc_3we3a.js";import"./index-lOCMRivH.js";import"./BaseInput-DbqsGneP.js";import"./PlusOutlined-CN2z7hv2.js";const R=()=>{const[T,p]=t.useState("0"),[b,o]=t.useState(!1),[g,l]=t.useState(!1),[n,d]=t.useState([]),[u,h]=t.useState([]),[i,x]=t.useState([]),[y,S]=t.useState([]);t.useEffect(()=>{m()},[]),t.useEffect(()=>{i.length>0&&j(i)},[i]);const m=()=>{l(!0),E().then(e=>{const s=e.data.data.map(r=>r.id);x(s),h(e.data.data),d(e.data.data)}).catch(e=>{console.error(e)}).finally(()=>{l(!1)})},j=e=>{l(!0),Promise.all(e.map(s=>D(s))).then(s=>{const r=s.reduce((c,w,k)=>(c[e[k]]=w.data.data.orderItems,c),{});S(r)}).catch(s=>{console.error(s)}).finally(()=>{l(!1)})},f=()=>{window.scrollY>=50?o(!0):o(!1)};t.useEffect(()=>(window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}),[]);const O=[{label:"Semua",key:"0"},{label:"Belum Bayar",key:"1"},{label:"Sedang Disewa",key:"2"},{label:"Dibatalkan",key:"3"},{label:"Selesai",key:"4"}],v=e=>{if(p(e),e==="0")d(u);else{const s=u.filter(r=>({belum_bayar:"1",sedang_disewa:"2",dibatalkan:"3",selesai:"4"})[r.status]===e);d(s)}};return g?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx(I,{size:"large"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:`${b?"bg-opacity-60 backdrop-blur-lg":"bg-white"} tabs-sticky`,children:a.jsx("div",{className:"mt-4",children:a.jsx(N,{defaultActiveKey:"0",size:"large",onChange:v,style:{marginBottom:8},items:O})})}),n&&n.length>0?n.map(e=>a.jsx(M,{order:e,productItems:y[e.id]||[],refreshOrders:m},e.id)):a.jsx("div",{className:"min-h-screen flex justify-center text-center",children:a.jsx("p",{className:"text-neutral my-24",children:"Belum ada order"})})]})};export{R as default};
